# Project Summary: Modern Offline Todo App

## 1. Technology Stack & Libraries
We built a production-grade, offline-first mobile application using the modern **Expo** ecosystem.

-   **Core Framework**: [React Native](https://reactnative.dev/) via [Expo SDK 52+](https://expo.dev/).
-   **Database**: [expo-sqlite](https://docs.expo.dev/versions/latest/sdk/sqlite/) (Embedded SQL) + [drizzle-orm](https://orm.drizzle.team/) (Type-safe query builder).
-   **State Management**: [Zustand](https://github.com/pmndrs/zustand) (Minimalist global state).
-   **Styling**: [NativeWind](https://www.nativewind.dev/) (Tailwind CSS for React Native).
-   **Navigation**: [Expo Router](https://docs.expo.dev/router/introduction/) (File-based routing).
-   **Animations & Icons**: `react-native-reanimated`, `react-native-svg`, `lucide-react-native`.
-   **Tools**: `expo-drizzle-studio-plugin` (DB Inspector), `expo-notifications` (Local pushes).

## 2. Architecture Overview
The app follows a **Unidirectional Data Flow** with a persistent local database.

1.  **UI Component** triggers an Action (e.g., [addTodo](file:///c:/Dan/RN/offline_todo/store/useTodoStore.ts#35-47)).
2.  **Zustand Store** calls the **Database** (Drizzle/SQLite).
3.  **Database** writes to the file system (device storage).
4.  **Store** re-fetches the latest data and updates the **State**.
5.  **UI** re-renders automatically to reflect the new state.

## 3. detailed Code Walkthrough

### Database Layer (`/db`)
-   **`schema.ts`**: Defines the shapes of our tables. We have a `todos` table with `id`, `text`, `isCompleted`, and `createdAt`. This is the "Blueprint".
-   **`client.ts`**: Initializes the connection to `todos.db`. It exports the `db` object used to run queries.

### State Management (`/store`)
-   **`useTodoStore.ts`**: The brain of the application.
    -   **`todos`**: Array of todo items currently in memory.
    -   **`init()`**: Called on app launch. Creates the table if it doesn't exist.
    -   **`loadTodos()`**: Runs `SELECT * FROM todos ORDER BY created_at DESC` and updates state.
    -   **`addTodo/toggleTodo/deleteTodo`**: Async functions that perform SQL operations using Drizzle, then call `loadTodos()` to keep the UI in sync.

### User Interface (`/app` & `/components`)
-   **`_layout.tsx`**: The Root component. Sets up Providers (Drizzle Studio), Notification handlers, and the base Navigation Stack.
-   **`(tabs)/`**: Folder for Tab Navigation.
    -   **`_layout.tsx`**: Configures the Bottom Tab Bar (Tasks, History, Settings).
    -   **`index.tsx` (Tasks)**: The Main screen. Shows active tasks. Features a **Progress Ring** header.
    -   **`completed.tsx` (History)**: Shows only finished tasks. Has a "Clear All" button.
-   **Components**:
    -   **`TodoItem.tsx`**: Individual row. Handles **Tap** (Toggle), **Long Press** (Edit), and **Trash Icon** (Delete). Uses `Haptics` for tactile feel.
    -   **`ProgressRing.tsx`**: Custom SVG component that animates a circle stroke based on completion percentage.

## 4. Build & Deployment
-   **Development Build** (`--profile development`): A large build (~200MB) containing debug tools and the Metro Client. Requires a running server.
-   **Preview Build** (`--profile preview`): A Standalone APK (~30MB). Contains the bundled JavaScript. **This is what you want for testing on a device without a computer.**
-   **Production Build** (`--profile production`): An AAB file signed for the Google Play Store.

## 5. Next Steps
-   **Testing**: Install the APK generated by the `preview` command.
-   **Release**: Upload the AAB from the `production` command to the Play Console.
